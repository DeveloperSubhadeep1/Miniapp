<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hell King</title>
    <link href="./dist/output.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #c9d1d9;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 480px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .header {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0;
            color: #c9d1d9;
        }
        .header-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        .main-content {
            width: 100%;
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 0.75rem;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-top: 1rem;
        }
        .content-image {
            width: 100%;
            height: auto;
            max-width: 300px;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        .content-details {
            width: 100%;
            text-align: left;
            margin-top: 1rem;
        }
        .content-details p {
            margin-bottom: 0.5rem;
        }
        .content-details .label {
            color: #58a6ff;
            font-weight: 500;
        }
        .genres-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .genre-tag {
            background-color: #21262d;
            border: 1px solid #30363d;
            color: #c9d1d9;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 2rem;
        }
        .nav-button {
            flex-grow: 1;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .nav-button:disabled {
            background-color: #30363d;
            color: #768390;
            cursor: not-allowed;
            box-shadow: none;
        }
        .nav-button.back {
            background: linear-gradient(to right, #00d2ff, #3a7bd5);
            color: white;
            margin-right: 0.5rem;
        }
        .nav-button.next {
            background: linear-gradient(to right, #3a7bd5, #00d2ff);
            color: white;
            margin-left: 0.5rem;
        }
        .footer {
            margin-top: 2rem;
            width: 100%;
            text-align: center;
        }
        .search-container {
            display: flex;
            width: 100%;
            padding: 0 1rem;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        .search-input {
            flex-grow: 1;
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            color: #c9d1d9;
            outline: none;
        }
        .search-input::placeholder {
            color: #768390;
        }
        .search-button {
            background-color: #00d2ff;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .search-button:disabled {
            background-color: #30363d;
            cursor: not-allowed;
            color: #768390;
        }
        .powered-by {
            font-size: 0.8rem;
            color: #768390;
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 0.75rem;
            padding: 1.5rem;
            z-index: 1000;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -60%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }
        .language-selector {
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 0.5rem;
            padding: 0.25rem 0.5rem;
            color: #c9d1d9;
            outline: none;
            margin-left: 1rem;
        }
        .switch-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            user-select: none;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #30363d;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #00d2ff;
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <span class="header-title" id="header-title"></span>
        <select id="language-selector" class="language-selector">
            <option value="en">English</option>
            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
            <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
        </select>
    </div>

    <div class="switch-container">
        <label for="trending-switch" id="trending-label"></label>
        <label class="switch">
            <input type="checkbox" id="trending-switch">
            <span class="slider"></span>
        </label>
    </div>

    <div id="main-card" class="main-content hidden">
        <img id="poster" class="content-image" src="" alt="Poster">
        <div class="content-details">
            <p><span class="label" id="title-label"></span> <span id="title"></span></p>
            <p><span class="label" id="type-label"></span> <span id="type"></span></p>
            <p><span class="label" id="rating-label"></span> <span id="rating"></span></p>
            <p><span class="label" id="release-date-label"></span> <span id="release-date"></span></p>
            <p><span class="label" id="runtime-label"></span> <span id="runtime"></span></p>
            <p><span class="label" id="genres-label"></span> <span id="genres-container" class="genres-container"></span></p>
            <p class="mt-2"><span class="label" id="storyline-label"></span> <span id="storyline"></span></p>
        </div>
    </div>

    <div class="nav-buttons">
        <button id="back-button" class="nav-button back"></button>
        <button id="next-button" class="nav-button next"></button>
    </div>

    <div class="footer">
        <p class="powered-by" id="powered-by-text"></p>
        <button id="search-telegram-button" class="nav-button mt-2" style="background: linear-gradient(to right, #0088cc, #42a5f5); color: white;">Search on Telegram</button>
    </div>

    <div class="search-container">
        <input type="text" id="search-input" class="search-input">
        <button id="search-button" class="search-button"></button>
    </div>
</div>

<script>
    const API_KEY = '1c4187f895ad7e2b461e96e3c621c9d3';
    const BASE_URL = 'https://api.themoviedb.org/3';
    const IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w500';
    const TELEGRAM_BOT_URL = 'https://telegram.me/Hell_King_69_Bot?start=getfile-';

    let searchResults = [];
    let currentIndex = 0;
    let currentLanguage = 'en';

    const languageSelector = document.getElementById('language-selector');
    const trendingSwitch = document.getElementById('trending-switch');
    const trendingLabel = document.getElementById('trending-label');
    const searchInput = document.getElementById('search-input');
    const searchButton = document.getElementById('search-button');
    const backButton = document.getElementById('back-button');
    const nextButton = document.getElementById('next-button');
    const searchTelegramButton = document.getElementById('search-telegram-button');
    const mainCard = document.getElementById('main-card');
    const poster = document.getElementById('poster');
    const titleElem = document.getElementById('title');
    const typeElem = document.getElementById('type');
    const ratingElem = document.getElementById('rating');
    const releaseDateElem = document.getElementById('release-date');
    const runtimeElem = document.getElementById('runtime');
    const genresContainer = document.getElementById('genres-container');
    const storylineElem = document.getElementById('storyline');

    const languageMap = {
        'en': 'en-US',
        'bn': 'bn-BD',
        'hi': 'hi-IN',
        'ta': 'ta-IN',
        'te': 'te-IN'
    };

    const genreMap = new Map();

    const translations = {
        en: {
            headerTitle: 'The Hell King ‚ú®',
            searchPlaceholder: 'Search movies or series...',
            searchButton: 'Search',
            backButton: '‚Üê Back',
            nextButton: 'Next ‚Üí',
            trendingLabel: 'Trending',
            titleLabel: 'Title:',
            typeLabel: 'Type:',
            ratingLabel: 'Rating:',
            releaseDateLabel: 'Release Date:',
            runtimeLabel: 'Runtime:',
            genresLabel: 'Genres:',
            storylineLabel: 'Storyline:',
            movieType: 'Movie üé¨',
            seriesType: 'Series üì∫',
            unknown: 'Unknown',
            noStoryline: 'No storyline available.',
            posterNotFound: 'Poster Not Found',
            searchResultsNotFound: 'No search results found.',
            searchPrompt: 'Please enter something to search for.',
            trendingLoadError: 'Failed to load trending content.',
            poweredBy: 'Powered by The Hell King',
            closeButton: 'Close',
            mins: 'minutes',
            minsPerEp: 'mins/ep',
            noTranslatedStoryline: 'No storyline available in this language. Showing original.',
            apiForbiddenError: 'API key error. Your environment may not have a valid API key, or it may have expired.'
        },
        bn: {
            headerTitle: '‡¶¶‡ßç‡¶Ø ‡¶π‡ßá‡¶≤ ‡¶ï‡¶ø‡¶Ç ‚ú®',
            searchPlaceholder: '‡¶Æ‡ßÅ‡¶≠‡¶ø ‡¶¨‡¶æ ‡¶∏‡¶ø‡¶∞‡¶ø‡¶ú ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...',
            searchButton: '‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®',
            backButton: '‚Üê ‡¶Ü‡¶ó‡ßá‡¶∞',
            nextButton: '‡¶™‡¶∞‡ßá‡¶∞ ‚Üí',
            trendingLabel: '‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç',
            titleLabel: '‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤:',
            typeLabel: '‡¶ß‡¶∞‡¶®:',
            ratingLabel: '‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç:',
            releaseDateLabel: '‡¶∞‡¶ø‡¶≤‡¶ø‡¶ú ‡¶°‡ßá‡¶ü:',
            runtimeLabel: '‡¶∞‡¶æ‡¶®‡¶ü‡¶æ‡¶á‡¶Æ:',
            genresLabel: '‡¶ú‡¶®‡¶∞‡¶æ:',
            storylineLabel: '‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶≤‡¶æ‡¶á‡¶®:',
            movieType: '‡¶ö‡¶≤‡¶ö‡ßç‡¶ö‡¶ø‡¶§‡ßç‡¶∞ üé¨',
            seriesType: '‡¶∏‡¶ø‡¶∞‡¶ø‡¶ú üì∫',
            unknown: '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ',
            noStoryline: '‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶≤‡¶æ‡¶á‡¶® ‡¶®‡ßá‡¶á‡•§',
            posterNotFound: '‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø',
            searchResultsNotFound: '‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶®‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§',
            searchPrompt: '‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§',
            trendingLoadError: '‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§',
            poweredBy: 'Powered by The Hell King',
            closeButton: '‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®',
            mins: '‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü',
            minsPerEp: '‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü/‡¶è‡¶™‡¶ø‡¶∏‡ßã‡¶°',
            noTranslatedStoryline: '‡¶è‡¶á ‡¶≠‡¶æ‡¶∑‡¶æ‡¶Ø‡¶º ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶≤‡¶æ‡¶á‡¶® ‡¶®‡ßá‡¶á‡•§ ‡¶Æ‡ßÇ‡¶≤‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§',
            apiForbiddenError: 'API key-‡¶§‡ßá ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂‡ßá ‡¶¨‡ßà‡¶ß API key ‡¶®‡ßá‡¶á, ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡•§'
        },
        hi: {
            headerTitle: '‡§¶ ‡§π‡•á‡§≤ ‡§ï‡§ø‡§Ç‡§ó ‚ú®',
            searchPlaceholder: '‡§Æ‡•Ç‡§µ‡•Ä ‡§Ø‡§æ ‡§∏‡•Ä‡§∞‡•Ä‡§ú ‡§ñ‡•ã‡§ú‡•á‡§Ç...',
            searchButton: '‡§ñ‡•ã‡§ú‡•á‡§Ç',
            backButton: '‚Üê ‡§™‡§ø‡§õ‡§≤‡§æ',
            nextButton: '‡§Ö‡§ó‡§≤‡§æ ‚Üí',
            trendingLabel: '‡§ü‡•ç‡§∞‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó',
            titleLabel: '‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï:',
            typeLabel: '‡§™‡•ç‡§∞‡§ï‡§æ‡§∞:',
            ratingLabel: '‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó:',
            releaseDateLabel: '‡§∞‡§ø‡§≤‡•Ä‡§ú ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ:',
            runtimeLabel: '‡§∞‡§®‡§ü‡§æ‡§á‡§Æ:',
            genresLabel: '‡§∂‡•à‡§≤‡§ø‡§Ø‡§æ‡§Å:',
            storylineLabel: '‡§ï‡§π‡§æ‡§®‡•Ä:',
            movieType: '‡§´‡§ø‡§≤‡•ç‡§Æ üé¨',
            seriesType: '‡§∏‡•Ä‡§∞‡•Ä‡§ú üì∫',
            unknown: '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§',
            noStoryline: '‡§ï‡•ã‡§à ‡§ï‡§π‡§æ‡§®‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§',
            posterNotFound: '‡§™‡•ã‡§∏‡•ç‡§ü‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ',
            searchResultsNotFound: '‡§ñ‡•ã‡§ú ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§',
            searchPrompt: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡•Å‡§õ ‡§≤‡§ø‡§ñ‡•á‡§Ç.',
            trendingLoadError: '‡§ü‡•ç‡§∞‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡•§',
            poweredBy: 'Powered by The Hell King',
            closeButton: '‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
            mins: '‡§Æ‡§ø‡§®‡§ü',
            minsPerEp: '‡§Æ‡§ø‡§®‡§ü/‡§è‡§™‡§ø‡§∏‡•ã‡§°',
            noTranslatedStoryline: '‡§á‡§∏ ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§ï‡§π‡§æ‡§®‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§Æ‡•Ç‡§≤ ‡§¶‡§ø‡§ñ‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à‡•§',
            apiForbiddenError: 'API key ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§Ü‡§™‡§ï‡•á ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§µ‡•à‡§ß API key ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à, ‡§Ø‡§æ ‡§â‡§∏‡§ï‡•Ä ‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à‡•§'
        },
        ta: {
            headerTitle: '‡Æ§‡Æø ‡Æπ‡ØÜ‡Æ≤‡Øç ‡Æï‡Æø‡Æô‡Øç ‚ú®',
            searchPlaceholder: '‡Æ§‡Æø‡Æ∞‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ§‡Øä‡Æü‡Æ∞‡Øà ‡Æ§‡Øá‡Æü‡ØÅ...',
            searchButton: '‡Æ§‡Øá‡Æü‡ØÅ',
            backButton: '‚Üê ‡ÆÆ‡ØÅ‡Æ®‡Øç‡Æ§‡Øà‡ÆØ‡Æ§‡ØÅ',
            nextButton: '‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ§‡ØÅ ‚Üí',
            trendingLabel: '‡Æ™‡Æø‡Æ∞‡Æ™‡Æ≤‡ÆÆ‡Ææ‡Æ©‡Æµ‡Øà',
            titleLabel: '‡Æ§‡Æ≤‡Øà‡Æ™‡Øç‡Æ™‡ØÅ:',
            typeLabel: '‡Æµ‡Æï‡Øà:',
            ratingLabel: '‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÄ‡Æü‡ØÅ:',
            releaseDateLabel: '‡Æµ‡ØÜ‡Æ≥‡Æø‡ÆØ‡ØÄ‡Æü‡Øç‡Æü‡ØÅ ‡Æ§‡Øá‡Æ§‡Æø:',
            runtimeLabel: '‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç:',
            genresLabel: '‡Æµ‡Æï‡Øà‡Æï‡Æ≥‡Øç:',
            storylineLabel: '‡Æï‡Æ§‡Øà‡Æö‡Øç ‡Æö‡ØÅ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ÆÆ‡Øç:',
            movieType: '‡Æ§‡Æø‡Æ∞‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ÆÆ‡Øç üé¨',
            seriesType: '‡Æ§‡Øä‡Æü‡Æ∞‡Øç üì∫',
            unknown: '‡Æ§‡ØÜ‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ§‡Æ§‡ØÅ',
            noStoryline: '‡Æï‡Æ§‡Øà‡Æö‡Øç ‡Æö‡ØÅ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ÆÆ‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.',
            posterNotFound: '‡Æ™‡Øã‡Æ∏‡Øç‡Æü‡Æ∞‡Øç ‡Æï‡Æø‡Æü‡Øà‡Æï‡Øç‡Æï‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà',
            searchResultsNotFound: '‡Æ§‡Øá‡Æü‡Æ≤‡Øç ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà.',
            searchPrompt: '‡Æè‡Æ§‡Ææ‡Æµ‡Æ§‡ØÅ ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.',
            trendingLoadError: '‡Æ™‡Æø‡Æ∞‡Æ™‡Æ≤ ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æü‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡Æè‡Æ±‡Øç‡Æ±‡ØÅ‡Æµ‡Æ§‡Æø‡Æ≤‡Øç ‡Æ§‡Øã‡Æ≤‡Øç‡Æµ‡Æø.',
            poweredBy: 'Powered by The Hell King',
            closeButton: '‡ÆÆ‡ØÇ‡Æü‡ØÅ',
            mins: '‡Æ®‡Æø‡ÆÆ‡Æø‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øç',
            minsPerEp: '‡Æ®‡Æø‡ÆÆ‡Æø‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øç/‡ÆÖ‡Æ§‡Øç‡Æ§‡Æø‡ÆØ‡Ææ‡ÆØ‡ÆÆ‡Øç',
            noTranslatedStoryline: '‡Æá‡Æ®‡Øç‡Æ§ ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æï‡Æ§‡Øà‡Æö‡Øç‡Æö‡ØÅ‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ÆÆ‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÖ‡Æö‡Æ≤‡Øç ‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ.',
            apiForbiddenError: 'API ‡Æµ‡Æø‡Æö‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æ™‡Æø‡Æ¥‡Øà. ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡ØÇ‡Æ¥‡Æ≤‡Æø‡Æ≤‡Øç ‡Æö‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ© API ‡Æµ‡Æø‡Æö‡Øà ‡Æá‡Æ≤‡Øç‡Æ≤‡Ææ‡ÆÆ‡Æ≤‡Øç ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æ≤‡Ææ‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡ÆÖ‡Æ§‡Æ©‡Øç ‡Æï‡Ææ‡Æ≤‡Ææ‡Æµ‡Æ§‡Æø ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æµ‡Æø‡Æü‡Øç‡Æü‡Æ§‡ØÅ.'
        },
        te: {
            headerTitle: '‡∞¶‡∞ø ‡∞π‡±Ü‡∞≤‡±ç ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç ‚ú®',
            searchPlaceholder: '‡∞∏‡∞ø‡∞®‡∞ø‡∞Æ‡∞æ ‡∞≤‡±á‡∞¶‡∞æ ‡∞∏‡∞ø‡∞∞‡±Ä‡∞∏‡±ç ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞µ‡±Ü‡∞§‡∞ï‡∞Ç‡∞°‡∞ø...',
            searchButton: '‡∞µ‡±Ü‡∞§‡∞ï‡∞Ç‡∞°‡∞ø',
            backButton: '‚Üê ‡∞µ‡±Ü‡∞®‡∞ï‡±ç‡∞ï‡∞ø',
            nextButton: '‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ ‚Üí',
            trendingLabel: '‡∞ü‡±ç‡∞∞‡±Ü‡∞Ç‡∞°‡∞ø‡∞Ç‡∞ó‡±ç',
            titleLabel: '‡∞∂‡±Ä‡∞∞‡±ç‡∞∑‡∞ø‡∞ï:',
            typeLabel: '‡∞∞‡∞ï‡∞Ç:',
            ratingLabel: '‡∞∞‡±á‡∞ü‡∞ø‡∞Ç‡∞ó‡±ç:',
            releaseDateLabel: '‡∞µ‡∞ø‡∞°‡±Å‡∞¶‡∞≤ ‡∞§‡±á‡∞¶‡±Ä:',
            runtimeLabel: '‡∞®‡∞°‡±Å‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞® ‡∞∏‡∞Æ‡∞Ø‡∞Ç:',
            genresLabel: '‡∞∂‡±à‡∞≤‡±Å‡∞≤‡±Å:',
            storylineLabel: '‡∞ï‡∞•‡∞æ‡∞Ç‡∞∂‡∞Ç:',
            movieType: '‡∞∏‡∞ø‡∞®‡∞ø‡∞Æ‡∞æ üé¨',
            seriesType: '‡∞∏‡∞ø‡∞∞‡±Ä‡∞∏‡±ç üì∫',
            unknown: '‡∞§‡±Ü‡∞≤‡∞ø‡∞Ø‡∞¶‡±Å',
            noStoryline: '‡∞ï‡∞•‡∞æ‡∞Ç‡∞∂‡∞Ç ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞≤‡±á‡∞¶‡±Å.',
            posterNotFound: '‡∞™‡±ã‡∞∏‡±ç‡∞ü‡∞∞‡±ç ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞¨‡∞°‡∞≤‡±á‡∞¶‡±Å.',
            searchResultsNotFound: '‡∞µ‡±Ü‡∞§‡±Å‡∞ï‡±Å‡∞ü‡∞≤‡±ã ‡∞é‡∞≤‡∞æ‡∞Ç‡∞ü‡∞ø ‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞≤‡±Å ‡∞≤‡∞≠‡∞ø‡∞Ç‡∞ö‡∞≤‡±á‡∞¶‡±Å.',
            searchPrompt: '‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞µ‡±ç‡∞∞‡∞æ‡∞Ø‡∞Ç‡∞°‡∞ø.',
            trendingLoadError: '‡∞ü‡±ç‡∞∞‡±Ü‡∞Ç‡∞°‡∞ø‡∞Ç‡∞ó‡±ç ‡∞ï‡∞Ç‡∞ü‡±Ü‡∞Ç‡∞ü‡±ç ‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç‡∞≤‡±ã ‡∞µ‡∞ø‡∞´‡∞≤‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø.',
            poweredBy: 'Powered by The Hell King',
            closeButton: '‡∞Æ‡±Ç‡∞∏‡∞ø‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø',
            mins: '‡∞®‡∞ø‡∞Æ‡∞ø‡∞∑‡∞æ‡∞≤‡±Å',
            minsPerEp: '‡∞®‡∞ø‡∞Æ‡∞ø‡∞∑‡∞æ‡∞≤‡±Å/‡∞é‡∞™‡∞ø‡∞∏‡±ã‡∞°‡±ç',
            noTranslatedStoryline: '‡∞à ‡∞≠‡∞æ‡∞∑‡∞≤‡±ã ‡∞ï‡∞•‡∞æ‡∞Ç‡∞∂‡∞Ç ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞≤‡±á‡∞¶‡±Å. ‡∞Ö‡∞∏‡∞≤‡±Å ‡∞™‡±ç‡∞∞‡∞¶‡∞∞‡±ç‡∞∂‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø‡•§',
            apiForbiddenError: 'API ‡∞ï‡±Ä‡∞≤‡±ã ‡∞≤‡±ã‡∞™‡∞Ç. ‡∞Æ‡±Ä ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç‡∞≤‡±ã ‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡±Å‡∞¨‡∞æ‡∞ü‡±Å ‡∞Ö‡∞Ø‡±ç‡∞Ø‡±á API ‡∞ï‡±Ä ‡∞â‡∞Ç‡∞°‡∞ï‡∞™‡±ã‡∞µ‡∞ö‡±ç‡∞ö‡±Å ‡∞≤‡±á‡∞¶‡∞æ ‡∞¶‡∞æ‡∞®‡∞ø ‡∞ó‡∞°‡±Å‡∞µ‡±Å ‡∞Æ‡±Å‡∞ó‡∞ø‡∞∏‡∞ø ‡∞â‡∞Ç‡∞°‡∞µ‡∞ö‡±ç‡∞ö‡±Å‡•§'
        }
    };

    function updateUI() {
        const lang = currentLanguage;
        const t = translations[lang];
        document.getElementById('header-title').textContent = t.headerTitle;
        searchInput.placeholder = t.searchPlaceholder;
        searchButton.textContent = t.searchButton;
        backButton.textContent = t.backButton;
        nextButton.textContent = t.nextButton;
        searchTelegramButton.textContent = 'Search on Telegram';
        trendingLabel.textContent = t.trendingLabel;
        document.getElementById('title-label').textContent = t.titleLabel;
        document.getElementById('type-label').textContent = t.typeLabel;
        document.getElementById('rating-label').textContent = t.ratingLabel;
        document.getElementById('release-date-label').textContent = t.releaseDateLabel;
        document.getElementById('runtime-label').textContent = t.runtimeLabel;
        document.getElementById('genres-label').textContent = t.genresLabel;
        document.getElementById('storyline-label').textContent = t.storylineLabel;
        document.getElementById('powered-by-text').textContent = t.poweredBy;

        updateNavigationButtons();
    }

    function showMessage(messageKey, titleKey = null) {
        const message = translations[currentLanguage][messageKey] || messageKey;
        const title = translations[currentLanguage][titleKey] || titleKey || '';

        const existingMessageBox = document.querySelector('.message-box');
        if (existingMessageBox) existingMessageBox.remove();

        const messageBox = document.createElement('div');
        messageBox.className = 'message-box';
        let innerHTML = '';
        if (title) {
             innerHTML += `<h3 class="font-bold mb-2">${title}</h3>`;
        }
        innerHTML += `<p>${message}</p>
            <button class="mt-4 px-4 py-2 bg-[#00d2ff] text-white rounded-md font-semibold">${translations[currentLanguage].closeButton}</button>
        `;
        messageBox.innerHTML = innerHTML;
        document.body.appendChild(messageBox);

        const overlay = document.createElement('div');
        overlay.className = 'overlay';
        document.body.appendChild(overlay);

        const closeButton = messageBox.querySelector('button');
        closeButton.addEventListener('click', () => {
            messageBox.remove();
            overlay.remove();
        });
    }

    async function fetchGenres() {
        try {
            const response = await fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=${languageMap[currentLanguage]}`);
            const data = await response.json();
            if (data && data.genres) {
                genreMap.clear();
                data.genres.forEach(genre => {
                    genreMap.set(genre.id, genre.name);
                });
            }
        } catch (error) {
            console.error('Error fetching genres:', error);
        }
    }

    async function fetchTrendingContent() {
        try {
            const TRENDING_URL = `${BASE_URL}/trending/all/week?api_key=${API_KEY}`;
            const response = await fetch(`${TRENDING_URL}&language=${languageMap[currentLanguage]}`);
            const data = await response.json();
            if (data && data.results) {
                searchResults = data.results.filter(item => item.poster_path);
                if (searchResults.length === 0) {
                    showMessage('searchResultsNotFound');
                }
                currentIndex = 0;
                displayContent(currentIndex);
            } else {
                showMessage('trendingLoadError');
                searchResults = [];
            }
            updateNavigationButtons();
        } catch (error) {
            console.error('Error fetching trending content:', error);
            showMessage('trendingLoadError');
        }
    }

    // Function to fetch popular movies based on language
    async function fetchNonTrendingContent() {
        try {
            const POPULAR_URL = `${BASE_URL}/discover/movie?api_key=${API_KEY}&language=${languageMap[currentLanguage]}&sort_by=popularity.desc`;
            
            const response = await fetch(POPULAR_URL);
            const data = await response.json();

            if (data && data.results) {
                // Filter to show only movies
                searchResults = data.results.filter(item => item.media_type === 'movie' || item.title);
                
                if (searchResults.length === 0) {
                    showMessage('searchResultsNotFound');
                }

                currentIndex = 0;
                displayContent(currentIndex);
                updateNavigationButtons();
            } else {
                showMessage('searchResultsNotFound');
                searchResults = [];
            }
        } catch (error) {
            console.error('Error fetching non-trending content:', error);
            showMessage('trendingLoadError');
        }
    }

    async function fetchSearch(query) {
        try {
            const encodedQuery = encodeURIComponent(query);
            const SEARCH_URL = `${BASE_URL}/search/multi?api_key=${API_KEY}&query=${encodedQuery}`;
            const response = await fetch(`${SEARCH_URL}&language=${languageMap[currentLanguage]}`);
            const data = await response.json();
            if (data && data.results) {
                searchResults = data.results.filter(item => (item.media_type === 'movie' || item.media_type === 'tv') && item.poster_path);
                if (searchResults.length === 0) {
                    showMessage('searchResultsNotFound');
                }
                currentIndex = 0;
                displayContent(currentIndex);
            } else {
                showMessage('searchResultsNotFound');
                searchResults = [];
            }
            updateNavigationButtons();
        } catch (error) {
            console.error('Error fetching search results:', error);
            showMessage('searchResultsNotFound');
        }
    }

    async function fetchDetails(id, type) {
        try {
            const response = await fetch(`${BASE_URL}/${type}/${id}?api_key=${API_KEY}&language=${languageMap[currentLanguage]}`);
            return await response.json();
        } catch (error) {
            console.error('Error fetching details:', error);
            return null;
        }
    }

    function displayContent(index) {
        if (searchResults.length === 0) {
            mainCard.classList.add('hidden');
            return;
        }

        mainCard.classList.remove('hidden');
        const content = searchResults[index];

        fetchDetails(content.id, content.media_type).then(translatedDetails => {
            let displayedOverview = content.overview;
            if (translatedDetails && translatedDetails.overview) {
                displayedOverview = translatedDetails.overview;
            } else if (!content.overview) {
                displayedOverview = translations[currentLanguage].noStoryline;
            }
            storylineElem.textContent = displayedOverview;

            poster.src = content.poster_path ? `${IMAGE_BASE_URL}${content.poster_path}` : 'https://placehold.co/500x750?text=' + translations[currentLanguage].posterNotFound.replace(/ /g, '+');
            titleElem.textContent = content.title || content.name || translations[currentLanguage].unknown;
            typeElem.textContent = content.media_type === 'movie' ? translations[currentLanguage].movieType : translations[currentLanguage].seriesType;
            ratingElem.textContent = content.vote_average ? `${content.vote_average.toFixed(2)} / 10` : translations[currentLanguage].unknown;
            releaseDateElem.textContent = content.release_date || content.first_air_date || translations[currentLanguage].unknown;
            runtimeElem.textContent = translations[currentLanguage].unknown;

            if (translatedDetails) {
                if (content.media_type === 'movie' && translatedDetails.runtime) {
                    runtimeElem.textContent = `${translatedDetails.runtime} ${translations[currentLanguage].mins}`;
                } else if (content.media_type === 'tv' && translatedDetails.episode_run_time && translatedDetails.episode_run_time.length > 0) {
                    runtimeElem.textContent = `${translatedDetails.episode_run_time[0]} ${translations[currentLanguage].minsPerEp}`;
                } else {
                    runtimeElem.textContent = translations[currentLanguage].unknown;
                }
            }


            genresContainer.innerHTML = '';
            if (translatedDetails && translatedDetails.genres && translatedDetails.genres.length > 0) {
                translatedDetails.genres.forEach(genre => {
                    const span = document.createElement('span');
                    span.className = 'genre-tag';
                    span.textContent = genre.name;
                    genresContainer.appendChild(span);
                });
            } else if (content.genre_ids && content.genre_ids.length > 0) {
                content.genre_ids.forEach(genreId => {
                    const genreName = genreMap.get(genreId) || translations[currentLanguage].unknown;
                    const span = document.createElement('span');
                    span.className = 'genre-tag';
                    span.textContent = genreName;
                    genresContainer.appendChild(span);
                });
            } else {
                const span = document.createElement('span');
                span.textContent = translations[currentLanguage].unknown;
                genresContainer.appendChild(span);
            }
        });
    }

    function updateNavigationButtons() {
        if (searchResults.length > 0) {
            backButton.disabled = currentIndex === 0;
            nextButton.disabled = currentIndex === searchResults.length - 1;
        } else {
            backButton.disabled = true;
            nextButton.disabled = true;
        }
    }

    languageSelector.addEventListener('change', (event) => {
        currentLanguage = event.target.value;
        updateUI();
        fetchGenres();
        if (trendingSwitch.checked) {
            fetchTrendingContent();
        } else {
            fetchNonTrendingContent();
        }
    });

    trendingSwitch.addEventListener('change', (event) => {
        if (event.target.checked) {
            // Switch is ON: Show trending
            fetchTrendingContent();
        } else {
            // Switch is OFF: Show non-trending movies
            fetchNonTrendingContent();
        }
    });

    searchButton.addEventListener('click', () => {
        const query = searchInput.value.trim();
        if (query) {
            fetchSearch(query);
        } else {
            showMessage('searchPrompt');
        }
    });

    searchTelegramButton.addEventListener('click', () => {
        if (searchResults.length > 0) {
            const currentTitle = searchResults[currentIndex].title || searchResults[currentIndex].name;
            if (currentTitle) {
                const formattedTitle = currentTitle.replace(/[^\w\s]/gi, '').replace(/\s+/g, '-').toLowerCase();
                const telegramUrl = `${TELEGRAM_BOT_URL}${formattedTitle}`;
                window.open(telegramUrl, '_blank');
            }
        }
    });

    backButton.addEventListener('click', () => {
        if (currentIndex > 0) {
            currentIndex--;
            displayContent(currentIndex);
            updateNavigationButtons();
        }
    });

    nextButton.addEventListener('click', () => {
        if (currentIndex < searchResults.length - 1) {
            currentIndex++;
            displayContent(currentIndex);
            updateNavigationButtons();
        }
    });

    searchInput.addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            searchButton.click();
        }
    });

    window.onload = () => {
        fetchGenres();
        languageSelector.value = 'en';
        updateUI();
        trendingSwitch.checked = false;
        fetchNonTrendingContent();
    };

</script>

</body>
</html>
